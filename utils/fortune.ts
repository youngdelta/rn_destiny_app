// ì‹­ì´ì§€ì‹  (ë )
export const ZODIAC_ANIMALS = [
  { name: 'ì¥ë ', emoji: 'ğŸ€', element: 'ìˆ˜(æ°´)' },
  { name: 'ì†Œë ', emoji: 'ğŸ‚', element: 'í† (åœŸ)' },
  { name: 'í˜¸ë‘ì´ë ', emoji: 'ğŸ…', element: 'ëª©(æœ¨)' },
  { name: 'í† ë¼ë ', emoji: 'ğŸ‡', element: 'ëª©(æœ¨)' },
  { name: 'ìš©ë ', emoji: 'ğŸ‰', element: 'í† (åœŸ)' },
  { name: 'ë±€ë ', emoji: 'ğŸ', element: 'í™”(ç«)' },
  { name: 'ë§ë ', emoji: 'ğŸ', element: 'í™”(ç«)' },
  { name: 'ì–‘ë ', emoji: 'ğŸ‘', element: 'í† (åœŸ)' },
  { name: 'ì›ìˆ­ì´ë ', emoji: 'ğŸµ', element: 'ê¸ˆ(é‡‘)' },
  { name: 'ë‹­ë ', emoji: 'ğŸ“', element: 'ê¸ˆ(é‡‘)' },
  { name: 'ê°œë ', emoji: 'ğŸ•', element: 'í† (åœŸ)' },
  { name: 'ë¼ì§€ë ', emoji: 'ğŸ·', element: 'ìˆ˜(æ°´)' },
];

// 12ì‹œì§„ (íƒœì–´ë‚œ ì‹œê°„)
export const BIRTH_HOURS = [
  { name: 'ìì‹œ', time: '23:00-01:00', description: 'ë°¤ 11ì‹œ ~ ìƒˆë²½ 1ì‹œ' },
  { name: 'ì¶•ì‹œ', time: '01:00-03:00', description: 'ìƒˆë²½ 1ì‹œ ~ ìƒˆë²½ 3ì‹œ' },
  { name: 'ì¸ì‹œ', time: '03:00-05:00', description: 'ìƒˆë²½ 3ì‹œ ~ ìƒˆë²½ 5ì‹œ' },
  { name: 'ë¬˜ì‹œ', time: '05:00-07:00', description: 'ìƒˆë²½ 5ì‹œ ~ ì•„ì¹¨ 7ì‹œ' },
  { name: 'ì§„ì‹œ', time: '07:00-09:00', description: 'ì•„ì¹¨ 7ì‹œ ~ ì•„ì¹¨ 9ì‹œ' },
  { name: 'ì‚¬ì‹œ', time: '09:00-11:00', description: 'ì•„ì¹¨ 9ì‹œ ~ ì˜¤ì „ 11ì‹œ' },
  { name: 'ì˜¤ì‹œ', time: '11:00-13:00', description: 'ì˜¤ì „ 11ì‹œ ~ ì˜¤í›„ 1ì‹œ' },
  { name: 'ë¯¸ì‹œ', time: '13:00-15:00', description: 'ì˜¤í›„ 1ì‹œ ~ ì˜¤í›„ 3ì‹œ' },
  { name: 'ì‹ ì‹œ', time: '15:00-17:00', description: 'ì˜¤í›„ 3ì‹œ ~ ì˜¤í›„ 5ì‹œ' },
  { name: 'ìœ ì‹œ', time: '17:00-19:00', description: 'ì˜¤í›„ 5ì‹œ ~ ì €ë… 7ì‹œ' },
  { name: 'ìˆ ì‹œ', time: '19:00-21:00', description: 'ì €ë… 7ì‹œ ~ ë°¤ 9ì‹œ' },
  { name: 'í•´ì‹œ', time: '21:00-23:00', description: 'ë°¤ 9ì‹œ ~ ë°¤ 11ì‹œ' },
];

// ë³„ìë¦¬
export const ZODIAC_SIGNS = [
  { name: 'ë¬¼ë³‘ìë¦¬', startMonth: 1, startDay: 20, endMonth: 2, endDay: 18, emoji: 'â™’' },
  { name: 'ë¬¼ê³ ê¸°ìë¦¬', startMonth: 2, startDay: 19, endMonth: 3, endDay: 20, emoji: 'â™“' },
  { name: 'ì–‘ìë¦¬', startMonth: 3, startDay: 21, endMonth: 4, endDay: 19, emoji: 'â™ˆ' },
  { name: 'í™©ì†Œìë¦¬', startMonth: 4, startDay: 20, endMonth: 5, endDay: 20, emoji: 'â™‰' },
  { name: 'ìŒë‘¥ì´ìë¦¬', startMonth: 5, startDay: 21, endMonth: 6, endDay: 21, emoji: 'â™Š' },
  { name: 'ê²Œìë¦¬', startMonth: 6, startDay: 22, endMonth: 7, endDay: 22, emoji: 'â™‹' },
  { name: 'ì‚¬ììë¦¬', startMonth: 7, startDay: 23, endMonth: 8, endDay: 22, emoji: 'â™Œ' },
  { name: 'ì²˜ë…€ìë¦¬', startMonth: 8, startDay: 23, endMonth: 9, endDay: 22, emoji: 'â™' },
  { name: 'ì²œì¹­ìë¦¬', startMonth: 9, startDay: 23, endMonth: 10, endDay: 22, emoji: 'â™' },
  { name: 'ì „ê°ˆìë¦¬', startMonth: 10, startDay: 23, endMonth: 11, endDay: 21, emoji: 'â™' },
  { name: 'ì‚¬ìˆ˜ìë¦¬', startMonth: 11, startDay: 22, endMonth: 12, endDay: 21, emoji: 'â™' },
  { name: 'ì—¼ì†Œìë¦¬', startMonth: 12, startDay: 22, endMonth: 1, endDay: 19, emoji: 'â™‘' },
];

export interface FortuneResult {
  type: string;
  emoji: string;
  score: number;
  description: string;
  advice: string;
  luckyItem: string;
}

export interface DailyFortune {
  date: string;
  zodiacSign: typeof ZODIAC_SIGNS[0];
  overallScore: number;
  message: string;
  luckyNumber: number;
  luckyColor: string;
  fortunes: FortuneResult[];
}

export interface DetailedFortune {
  birthDate: Date;
  calendarType: 'solar' | 'lunar';
  birthHour: typeof BIRTH_HOURS[0];
  zodiacAnimal: typeof ZODIAC_ANIMALS[0];
  zodiacSign: typeof ZODIAC_SIGNS[0];
  fortunes: FortuneResult[];
}

// ë  ê³„ì‚°
export function getZodiacAnimal(year: number): typeof ZODIAC_ANIMALS[0] {
  const index = (year - 4) % 12;
  return ZODIAC_ANIMALS[index];
}

// ë³„ìë¦¬ ê³„ì‚°
export function getZodiacSign(month: number, day: number): typeof ZODIAC_SIGNS[0] {
  for (const sign of ZODIAC_SIGNS) {
    if (sign.startMonth === sign.endMonth) {
      if (month === sign.startMonth && day >= sign.startDay && day <= sign.endDay) {
        return sign;
      }
    } else if (sign.endMonth < sign.startMonth) {
      // ì—¼ì†Œìë¦¬ ì²˜ëŸ¼ ì—°ë„ë¥¼ ë„˜ì–´ê°€ëŠ” ê²½ìš°
      if ((month === sign.startMonth && day >= sign.startDay) ||
          (month === sign.endMonth && day <= sign.endDay)) {
        return sign;
      }
    } else {
      if ((month === sign.startMonth && day >= sign.startDay) ||
          (month === sign.endMonth && day <= sign.endDay)) {
        return sign;
      }
    }
  }
  return ZODIAC_SIGNS[0];
}

// ì‹œë“œ ê¸°ë°˜ ëœë¤ ìƒì„±ê¸°
function seededRandom(seed: number): () => number {
  return function() {
    seed = (seed * 9301 + 49297) % 233280;
    return seed / 233280;
  };
}

// ì˜¤ëŠ˜ì˜ ìš´ì„¸ ìƒì„±
export function generateDailyFortune(month: number, day: number): DailyFortune {
  const today = new Date();
  const dateString = `${today.getFullYear()}-${today.getMonth() + 1}-${today.getDate()}`;
  const seed = today.getFullYear() * 10000 + (today.getMonth() + 1) * 100 + today.getDate() + month * 31 + day;
  const random = seededRandom(seed);

  const zodiacSign = getZodiacSign(month, day);

  const fortuneTypes = [
    { type: 'ì „ì²´ìš´', emoji: 'ğŸŒŸ' },
    { type: 'ì• ì •ìš´', emoji: 'ğŸ’•' },
    { type: 'ê¸ˆì „ìš´', emoji: 'ğŸ’°' },
    { type: 'ê±´ê°•ìš´', emoji: 'ğŸ’ª' },
    { type: 'ì§ì¥ìš´', emoji: 'ğŸ’¼' },
  ];

  const descriptions = {
    ì „ì²´ìš´: [
      'ì˜¤ëŠ˜ì€ ë‹¹ì‹ ì—ê²Œ íŠ¹ë³„í•œ ê¸°ìš´ì´ ê°ë„ëŠ” ë‚ ì…ë‹ˆë‹¤.',
      'ê¸ì •ì ì¸ ì—ë„ˆì§€ê°€ ë‹¹ì‹ ì„ ê°ì‹¸ê³  ìˆìŠµë‹ˆë‹¤.',
      'ì¡°ìš©íˆ ìì‹ ì„ ë˜ëŒì•„ë³´ëŠ” ì‹œê°„ì´ í•„ìš”í•©ë‹ˆë‹¤.',
      'ìƒˆë¡œìš´ ê°€ëŠ¥ì„±ì´ ì—´ë¦¬ëŠ” í•˜ë£¨ê°€ ë  ê²ƒì…ë‹ˆë‹¤.',
      'ì£¼ë³€ ì‚¬ëŒë“¤ê³¼ì˜ ì¡°í™”ê°€ ì¤‘ìš”í•œ ë‚ ì…ë‹ˆë‹¤.',
    ],
    ì• ì •ìš´: [
      'ì‚¬ë‘í•˜ëŠ” ì‚¬ëŒê³¼ ê¹Šì€ ëŒ€í™”ë¥¼ ë‚˜ëˆ ë³´ì„¸ìš”.',
      'ìƒˆë¡œìš´ ë§Œë‚¨ì˜ ê¸°íšŒê°€ ì°¾ì•„ì˜¬ ìˆ˜ ìˆìŠµë‹ˆë‹¤.',
      'ì†Œì¤‘í•œ ì¸ì—°ì—ê²Œ ë§ˆìŒì„ í‘œí˜„í•´ë³´ì„¸ìš”.',
      'ê´€ê³„ì—ì„œ ì‘ì€ ì„œí”„ë¼ì´ì¦ˆê°€ í° ê¸°ì¨ì„ ì¤ë‹ˆë‹¤.',
      'ìƒëŒ€ë°©ì˜ ì…ì¥ì—ì„œ ìƒê°í•´ë³´ëŠ” ê²ƒì´ ì¢‹ê² ìŠµë‹ˆë‹¤.',
    ],
    ê¸ˆì „ìš´: [
      'ì˜ˆìƒì¹˜ ëª»í•œ ìˆ˜ì…ì´ ìƒê¸¸ ìˆ˜ ìˆìŠµë‹ˆë‹¤.',
      'ì¶©ë™ì ì¸ ì§€ì¶œì€ ìì œí•˜ëŠ” ê²ƒì´ ì¢‹ê² ìŠµë‹ˆë‹¤.',
      'íˆ¬ìë³´ë‹¤ëŠ” ì €ì¶•ì— ì§‘ì¤‘í•˜ì„¸ìš”.',
      'ê¸ˆì „ì ì¸ í–‰ìš´ì´ ë”°ë¥´ëŠ” ë‚ ì…ë‹ˆë‹¤.',
      'ê³„íšì ì¸ ì†Œë¹„ê°€ í•„ìš”í•œ ì‹œê¸°ì…ë‹ˆë‹¤.',
    ],
    ê±´ê°•ìš´: [
      'ì¶©ë¶„í•œ íœ´ì‹ì´ í•„ìš”í•œ í•˜ë£¨ì…ë‹ˆë‹¤.',
      'ê°€ë²¼ìš´ ìš´ë™ìœ¼ë¡œ í™œë ¥ì„ ì°¾ì•„ë³´ì„¸ìš”.',
      'ê±´ê°•ì— íŠ¹ë³„íˆ ì‹ ê²½ ì“°ì§€ ì•Šì•„ë„ ì¢‹ì€ ë‚ ì…ë‹ˆë‹¤.',
      'ìŠ¤íŠ¸ë ˆìŠ¤ ê´€ë¦¬ì— ì‹ ê²½ ì“°ì„¸ìš”.',
      'ê·œì¹™ì ì¸ ì‹ì‚¬ê°€ ì¤‘ìš”í•œ ì‹œê¸°ì…ë‹ˆë‹¤.',
    ],
    ì§ì¥ìš´: [
      'ì—…ë¬´ì—ì„œ ì¢‹ì€ ì„±ê³¼ë¥¼ ë‚¼ ìˆ˜ ìˆëŠ” ë‚ ì…ë‹ˆë‹¤.',
      'ë™ë£Œë“¤ê³¼ì˜ í˜‘ì—…ì´ ë¹›ì„ ë°œí•  ê²ƒì…ë‹ˆë‹¤.',
      'ìƒˆë¡œìš´ í”„ë¡œì íŠ¸ë¥¼ ì‹œì‘í•˜ê¸° ì¢‹ì€ íƒ€ì´ë°ì…ë‹ˆë‹¤.',
      'ìƒì‚¬ì—ê²Œ ì¸ì •ë°›ì„ ìˆ˜ ìˆëŠ” ê¸°íšŒê°€ ì˜µë‹ˆë‹¤.',
      'ì¡°ìš©íˆ ìì‹ ì˜ ì¼ì— ì§‘ì¤‘í•˜ëŠ” ê²ƒì´ ì¢‹ê² ìŠµë‹ˆë‹¤.',
    ],
  };

  const advices = {
    ì „ì²´ìš´: ['ê¸ì •ì ì¸ ë§ˆìŒê°€ì§ì„ ìœ ì§€í•˜ì„¸ìš”.', 'ì˜¤ëŠ˜ì˜ ê²°ì •ì´ ë¯¸ë˜ì— ì˜í–¥ì„ ì¤ë‹ˆë‹¤.', 'ì§ê°ì„ ë¯¿ìœ¼ì„¸ìš”.'],
    ì• ì •ìš´: ['ì§„ì‹¬ì„ ë‹´ì•„ ì†Œí†µí•˜ì„¸ìš”.', 'ìƒëŒ€ë°©ì„ ì´í•´í•˜ë ¤ ë…¸ë ¥í•˜ì„¸ìš”.', 'ì‘ì€ ë°°ë ¤ê°€ í° ê°ë™ì„ ì¤ë‹ˆë‹¤.'],
    ê¸ˆì „ìš´: ['ì§€ì¶œ ë‚´ì—­ì„ ì ê²€í•´ë³´ì„¸ìš”.', 'ì¥ê¸°ì ì¸ ê´€ì ì—ì„œ íŒë‹¨í•˜ì„¸ìš”.', 'ë¬´ë¦¬í•œ íˆ¬ìëŠ” í”¼í•˜ì„¸ìš”.'],
    ê±´ê°•ìš´: ['ì¶©ë¶„íˆ ìˆ˜ë¶„ì„ ì„­ì·¨í•˜ì„¸ìš”.', 'ìŠ¤íŠ¸ë ˆì¹­ìœ¼ë¡œ ê¸´ì¥ì„ í’€ì–´ë³´ì„¸ìš”.', 'ì¼ì° ì ìë¦¬ì— ë“œì„¸ìš”.'],
    ì§ì¥ìš´: ['íŒ€ì›Œí¬ë¥¼ ì¤‘ì‹œí•˜ì„¸ìš”.', 'ìƒˆë¡œìš´ ì•„ì´ë””ì–´ë¥¼ ì œì•ˆí•´ë³´ì„¸ìš”.', 'ê¼¼ê¼¼í•œ ì—…ë¬´ ì²˜ë¦¬ê°€ í•„ìš”í•©ë‹ˆë‹¤.'],
  };

  const luckyItems = {
    ì „ì²´ìš´: ['ë„¤ìí´ë¡œë²„', 'ë³´ë¼ìƒ‰ ë¬¼ê±´', 'ì€ë°˜ì§€'],
    ì• ì •ìš´: ['ë¶„í™ìƒ‰ ê½ƒ', 'í•˜íŠ¸ ëª¨ì–‘ ì•¡ì„¸ì„œë¦¬', 'ì»¤í”Œ ì•„ì´í…œ'],
    ê¸ˆì „ìš´: ['í™©ê¸ˆìƒ‰ ì§€ê°‘', 'ë™ì „', 'ë³µì£¼ë¨¸ë‹ˆ'],
    ê±´ê°•ìš´: ['ë…¹ìƒ‰ ì±„ì†Œ', 'ìš´ë™í™”', 'ë¬¼ë³‘'],
    ì§ì¥ìš´: ['íŒŒë€ìƒ‰ íœ', 'ìˆ˜ì²©', 'ëª…í•¨ì§€ê°‘'],
  };

  const fortunes: FortuneResult[] = fortuneTypes.map((ft) => {
    const descList = descriptions[ft.type as keyof typeof descriptions];
    const adviceList = advices[ft.type as keyof typeof advices];
    const itemList = luckyItems[ft.type as keyof typeof luckyItems];
    
    return {
      type: ft.type,
      emoji: ft.emoji,
      score: Math.floor(random() * 40) + 60, // 60-100
      description: descList[Math.floor(random() * descList.length)],
      advice: adviceList[Math.floor(random() * adviceList.length)],
      luckyItem: itemList[Math.floor(random() * itemList.length)],
    };
  });

  const luckyColors = ['ë¹¨ê°•', 'ì£¼í™©', 'ë…¸ë‘', 'ì´ˆë¡', 'íŒŒë‘', 'ë³´ë¼', 'ë¶„í™', 'í°ìƒ‰', 'ê²€ì •', 'ê¸ˆìƒ‰'];
  const messages = [
    `ì˜¤ëŠ˜ ${zodiacSign.name}ì—ê²Œ í–‰ìš´ì´ ê°€ë“í•  ê²ƒì…ë‹ˆë‹¤!`,
    `${zodiacSign.name}ì˜ ë§¤ë ¥ì´ ë¹›ë‚˜ëŠ” í•˜ë£¨ì…ë‹ˆë‹¤.`,
    `ì°¨ë¶„í•˜ê²Œ í•˜ë£¨ë¥¼ ë³´ë‚´ë©´ ì¢‹ì€ ì¼ì´ ìƒê¸¸ ê±°ì˜ˆìš”.`,
    `ìƒˆë¡œìš´ ê¸°íšŒë¥¼ ë†“ì¹˜ì§€ ë§ˆì„¸ìš”!`,
    `ì£¼ë³€ ì‚¬ëŒë“¤ì—ê²Œ ê°ì‚¬ë¥¼ í‘œí˜„í•´ë³´ì„¸ìš”.`,
  ];

  return {
    date: dateString,
    zodiacSign,
    overallScore: Math.round(fortunes.reduce((sum, f) => sum + f.score, 0) / fortunes.length),
    message: messages[Math.floor(random() * messages.length)],
    luckyNumber: Math.floor(random() * 100) + 1,
    luckyColor: luckyColors[Math.floor(random() * luckyColors.length)],
    fortunes,
  };
}

// ìƒì„¸ ìš´ì„¸ ìƒì„±
export function generateDetailedFortune(
  birthYear: number,
  birthMonth: number,
  birthDay: number,
  calendarType: 'solar' | 'lunar',
  birthHourIndex: number
): DetailedFortune {
  const today = new Date();
  const seed = birthYear + birthMonth * 31 + birthDay + birthHourIndex + 
    today.getFullYear() * 10000 + (today.getMonth() + 1) * 100 + today.getDate();
  const random = seededRandom(seed);

  const zodiacAnimal = getZodiacAnimal(birthYear);
  const zodiacSign = getZodiacSign(birthMonth, birthDay);
  const birthHour = BIRTH_HOURS[birthHourIndex];

  const fortuneTypes = [
    { type: 'ì „ì²´ìš´', emoji: 'ğŸŒŸ' },
    { type: 'ê±´ê°•ìš´', emoji: 'ğŸ’ª' },
    { type: 'ì• ì •ìš´', emoji: 'ğŸ’•' },
    { type: 'ì§ì¥ìš´', emoji: 'ğŸ’¼' },
    { type: 'ì¬ë¬¼ìš´', emoji: 'ğŸ’' },
    { type: 'í•™ì—…ìš´', emoji: 'ğŸ“š' },
  ];

  const detailedDescriptions = {
    ì „ì²´ìš´: [
      `${zodiacAnimal.name}ì˜ ${zodiacAnimal.element} ê¸°ìš´ì´ ê°•í•˜ê²Œ ì‘ìš©í•˜ëŠ” ì‹œê¸°ì…ë‹ˆë‹¤. ì „ë°˜ì ìœ¼ë¡œ ìš´ì„¸ê°€ ìƒìŠ¹ì„¸ì— ìˆìœ¼ë©°, íŠ¹íˆ ëŒ€ì¸ê´€ê³„ì—ì„œ ì¢‹ì€ ê¸°ìš´ì´ ëŠê»´ì§‘ë‹ˆë‹¤.`,
      `${birthHour.name}ì— íƒœì–´ë‚œ ë‹¹ì‹ ì€ ì§ê´€ë ¥ì´ ë›°ì–´ë‚˜ë©°, ì˜¤ëŠ˜ì€ ê·¸ ëŠ¥ë ¥ì´ ë¹›ì„ ë°œí•  ê²ƒì…ë‹ˆë‹¤. ì¤‘ìš”í•œ ê²°ì •ì„ ë‚´ë¦¬ê¸°ì— ì¢‹ì€ ì‹œê¸°ì…ë‹ˆë‹¤.`,
      `${zodiacSign.name}ì˜ ì˜í–¥ìœ¼ë¡œ ì°½ì˜ë ¥ì´ ë†’ì•„ì§€ëŠ” ì‹œê¸°ì…ë‹ˆë‹¤. ìƒˆë¡œìš´ ì•„ì´ë””ì–´ë‚˜ í”„ë¡œì íŠ¸ë¥¼ ì‹œì‘í•˜ë©´ ì¢‹ì€ ê²°ê³¼ë¥¼ ì–»ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.`,
      `ì „ë°˜ì ì¸ ê¸°ìš´ì´ ì•ˆì •ì ì…ë‹ˆë‹¤. ê¸‰í•˜ê²Œ ì„œë‘ë¥´ê¸°ë³´ë‹¤ ì°¨ë¶„í•˜ê²Œ ì¼ì„ ì²˜ë¦¬í•˜ë©´ ì¢‹ì€ ê²°ê³¼ê°€ ë”°ë¥¼ ê²ƒì…ë‹ˆë‹¤.`,
    ],
    ê±´ê°•ìš´: [
      `${zodiacAnimal.element} ê¸°ìš´ì˜ ì˜í–¥ìœ¼ë¡œ ì†Œí™”ê¸° ê±´ê°•ì— ì‹ ê²½ì„ ì¨ì•¼ í•©ë‹ˆë‹¤. ê·œì¹™ì ì¸ ì‹ì‚¬ì™€ ì¶©ë¶„í•œ ìˆ˜ë¶„ ì„­ì·¨ê°€ ì¤‘ìš”í•©ë‹ˆë‹¤.`,
      `ì „ì²´ì ìœ¼ë¡œ ê±´ê°•ìš´ì´ ì–‘í˜¸í•©ë‹ˆë‹¤. ê°€ë²¼ìš´ ìš´ë™ì„ ê¾¸ì¤€íˆ í•˜ë©´ ì²´ë ¥ì´ ë”ìš± ì¢‹ì•„ì§ˆ ê²ƒì…ë‹ˆë‹¤.`,
      `ìŠ¤íŠ¸ë ˆìŠ¤ ê´€ë¦¬ê°€ í•„ìš”í•œ ì‹œê¸°ì…ë‹ˆë‹¤. ëª…ìƒì´ë‚˜ ìš”ê°€ ê°™ì€ ì´ì™„ í™œë™ì„ ì¶”ì²œí•©ë‹ˆë‹¤.`,
      `ì¶©ë¶„í•œ ìˆ˜ë©´ì´ ê±´ê°•ì˜ í•µì‹¬ì…ë‹ˆë‹¤. ì¼ì° ì ìë¦¬ì— ë“œëŠ” ìŠµê´€ì„ ë“¤ì—¬ë³´ì„¸ìš”.`,
    ],
    ì• ì •ìš´: [
      `${zodiacSign.name}ì˜ ë§¤ë ¥ì´ ë‹ë³´ì´ëŠ” ì‹œê¸°ì…ë‹ˆë‹¤. ìƒˆë¡œìš´ ì¸ì—°ì„ ë§Œë‚  ê°€ëŠ¥ì„±ì´ ë†’ìœ¼ë©°, ê¸°ì¡´ ê´€ê³„ë„ ë”ìš± ê¹Šì–´ì§ˆ ìˆ˜ ìˆìŠµë‹ˆë‹¤.`,
      `ì†”ì§í•œ ê°ì • í‘œí˜„ì´ ê´€ê³„ ë°œì „ì˜ ì—´ì‡ ì…ë‹ˆë‹¤. ë§ˆìŒì„ ì—´ê³  ìƒëŒ€ë°©ì—ê²Œ ë‹¤ê°€ê°€ë³´ì„¸ìš”.`,
      `ì—°ì¸ì´ ìˆë‹¤ë©´ í•¨ê»˜ ìƒˆë¡œìš´ ê²½í—˜ì„ í•˜ë©´ ì¢‹ìŠµë‹ˆë‹¤. ì—¬í–‰ì´ë‚˜ ìƒˆë¡œìš´ ì·¨ë¯¸ í™œë™ì„ ì¶”ì²œí•©ë‹ˆë‹¤.`,
      `ì¸ë‚´ì‹¬ì„ ê°€ì§€ê³  ìƒëŒ€ë°©ì„ ì´í•´í•˜ë ¤ëŠ” ë…¸ë ¥ì´ í•„ìš”í•©ë‹ˆë‹¤. ì‘ì€ ì˜¤í•´ê°€ ìƒê¸¸ ìˆ˜ ìˆìœ¼ë‹ˆ ì†Œí†µì— ì‹ ê²½ ì“°ì„¸ìš”.`,
    ],
    ì§ì¥ìš´: [
      `${birthHour.name}ì— íƒœì–´ë‚œ ì‚¬ëŒë“¤ì€ ë¦¬ë”ì‹­ì´ ê°•í•©ë‹ˆë‹¤. íŒ€ì„ ì´ë„ëŠ” ì—­í• ì—ì„œ ë‘ê°ì„ ë‚˜íƒ€ë‚¼ ìˆ˜ ìˆëŠ” ì‹œê¸°ì…ë‹ˆë‹¤.`,
      `ìƒˆë¡œìš´ í”„ë¡œì íŠ¸ë‚˜ ì—…ë¬´ë¥¼ ë§¡ê²Œ ë  ê°€ëŠ¥ì„±ì´ ìˆìŠµë‹ˆë‹¤. ë„ì „ì„ ë‘ë ¤ì›Œí•˜ì§€ ë§ˆì„¸ìš”.`,
      `ë™ë£Œë“¤ê³¼ì˜ í˜‘ë ¥ì´ ì¤‘ìš”í•œ ì‹œê¸°ì…ë‹ˆë‹¤. íŒ€ì›Œí¬ë¥¼ ë°œíœ˜í•˜ë©´ ì¢‹ì€ ì„±ê³¼ë¥¼ ì–»ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.`,
      `ê¾¸ì¤€í•œ ë…¸ë ¥ì´ ì¸ì •ë°›ëŠ” ì‹œê¸°ì…ë‹ˆë‹¤. ì„±ì‹¤í•˜ê²Œ ì—…ë¬´ì— ì„í•˜ë©´ ìŠ¹ì§„ì´ë‚˜ ë³´ìƒì´ ë”°ë¥¼ ê²ƒì…ë‹ˆë‹¤.`,
    ],
    ì¬ë¬¼ìš´: [
      `${zodiacAnimal.name}ì˜ ì¬ë¬¼ìš´ì´ ìƒìŠ¹í•˜ëŠ” ì‹œê¸°ì…ë‹ˆë‹¤. íˆ¬ìë³´ë‹¤ëŠ” ì €ì¶•ì— ì§‘ì¤‘í•˜ë©´ ì¢‹ê² ìŠµë‹ˆë‹¤.`,
      `ì˜ˆìƒì¹˜ ëª»í•œ ìˆ˜ì…ì´ ìƒê¸¸ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë‹¨, ì¶©ë™ì ì¸ ì§€ì¶œì€ í”¼í•˜ì„¸ìš”.`,
      `ê³„íšì ì¸ ì¬ì • ê´€ë¦¬ê°€ í•„ìš”í•œ ì‹œê¸°ì…ë‹ˆë‹¤. ë¶ˆí•„ìš”í•œ ì§€ì¶œì„ ì¤„ì´ê³  ì €ì¶•ì„ ëŠ˜ë ¤ë³´ì„¸ìš”.`,
      `ê¸ˆì „ì ì¸ í–‰ìš´ì´ ë”°ë¥´ëŠ” ì‹œê¸°ì…ë‹ˆë‹¤. ë³µê¶Œì´ë‚˜ ì‘ì€ íˆ¬ìì—ì„œ ê¸°ëŒ€ ì´ìƒì˜ ê²°ê³¼ë¥¼ ì–»ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.`,
    ],
    í•™ì—…ìš´: [
      `ì§‘ì¤‘ë ¥ì´ ë†’ì•„ì§€ëŠ” ì‹œê¸°ì…ë‹ˆë‹¤. ìƒˆë¡œìš´ ê²ƒì„ ë°°ìš°ê±°ë‚˜ ìê²©ì¦ ì·¨ë“ì— ë„ì „í•˜ë©´ ì¢‹ì€ ê²°ê³¼ê°€ ìˆì„ ê²ƒì…ë‹ˆë‹¤.`,
      `${zodiacSign.name}ì˜ ì§€ì  í˜¸ê¸°ì‹¬ì´ ë¹›ì„ ë°œí•©ë‹ˆë‹¤. ë…ì„œë‚˜ ê°•ì—° ì°¸ì„ì„ ì¶”ì²œí•©ë‹ˆë‹¤.`,
      `ê¾¸ì¤€í•œ ë…¸ë ¥ì´ ì‹¤ë ¥ í–¥ìƒìœ¼ë¡œ ì´ì–´ì§€ëŠ” ì‹œê¸°ì…ë‹ˆë‹¤. í¬ê¸°í•˜ì§€ ë§ê³  ê³„ì† ì •ì§„í•˜ì„¸ìš”.`,
      `ìƒˆë¡œìš´ ë¶„ì•¼ì— ê´€ì‹¬ì„ ê°€ì ¸ë³´ì„¸ìš”. ì˜ì™¸ì˜ ë¶„ì•¼ì—ì„œ ì¬ëŠ¥ì„ ë°œê²¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.`,
    ],
  };

  const detailedAdvices = {
    ì „ì²´ìš´: [
      'ì•„ì¹¨ì— ì¼ì–´ë‚˜ì„œ ìŠ¤íŠ¸ë ˆì¹­ìœ¼ë¡œ í•˜ë£¨ë¥¼ ì‹œì‘í•´ë³´ì„¸ìš”.',
      'ì˜¤ëŠ˜ í•˜ë£¨ ê°ì‚¬í•œ ì¼ 3ê°€ì§€ë¥¼ ì ì–´ë³´ì„¸ìš”.',
      'ì¤‘ìš”í•œ ê²°ì •ì€ ì˜¤í›„ì— ë‚´ë¦¬ëŠ” ê²ƒì´ ì¢‹ìŠµë‹ˆë‹¤.',
    ],
    ê±´ê°•ìš´: [
      'í•˜ë£¨ 8ì” ì´ìƒì˜ ë¬¼ì„ ë§ˆì‹œì„¸ìš”.',
      '30ë¶„ ì´ìƒì˜ ê±·ê¸° ìš´ë™ì„ ì¶”ì²œí•©ë‹ˆë‹¤.',
      'ì¶©ë¶„í•œ ìˆ™ë©´ì„ ì·¨í•˜ì„¸ìš”.',
    ],
    ì• ì •ìš´: [
      'ì‚¬ë‘í•˜ëŠ” ì‚¬ëŒì—ê²Œ ì§„ì‹¬ ì–´ë¦° ì¹­ì°¬ì„ í•´ë³´ì„¸ìš”.',
      'í•¨ê»˜í•˜ëŠ” ì‹œê°„ì„ ì†Œì¤‘íˆ ì—¬ê¸°ì„¸ìš”.',
      'ì‘ì€ ì„ ë¬¼ì´ë‚˜ í¸ì§€ë¡œ ë§ˆìŒì„ í‘œí˜„í•´ë³´ì„¸ìš”.',
    ],
    ì§ì¥ìš´: [
      'ì¤‘ìš”í•œ ë¯¸íŒ…ì€ ì˜¤ì „ì— ì¡ìœ¼ì„¸ìš”.',
      'ì—…ë¬´ ìš°ì„ ìˆœìœ„ë¥¼ ì •ë¦¬í•˜ê³  í•˜ë£¨ë¥¼ ì‹œì‘í•˜ì„¸ìš”.',
      'ì ì‹¬ì‹œê°„ì„ í™œìš©í•´ ë„¤íŠ¸ì›Œí‚¹ì„ í•´ë³´ì„¸ìš”.',
    ],
    ì¬ë¬¼ìš´: [
      'ì´ë²ˆ ë‹¬ ì§€ì¶œ ë‚´ì—­ì„ ì ê²€í•´ë³´ì„¸ìš”.',
      'ì¶©ë™êµ¬ë§¤ë¥¼ í”¼í•˜ê³  24ì‹œê°„ ìƒê°í•œ í›„ ê²°ì •í•˜ì„¸ìš”.',
      'ì¥ê¸°ì ì¸ ì €ì¶• ê³„íšì„ ì„¸ì›Œë³´ì„¸ìš”.',
    ],
    í•™ì—…ìš´: [
      'ì§‘ì¤‘ì´ ì•ˆ ë  ë•ŒëŠ” ì¥ì†Œë¥¼ ë°”ê¿”ë³´ì„¸ìš”.',
      'í¬ëª¨ë„ë¡œ ê¸°ë²•ìœ¼ë¡œ ê³µë¶€ íš¨ìœ¨ì„ ë†’ì—¬ë³´ì„¸ìš”.',
      'ë°°ìš´ ë‚´ìš©ì„ ë‹¤ë¥¸ ì‚¬ëŒì—ê²Œ ì„¤ëª…í•´ë³´ì„¸ìš”.',
    ],
  };

  const luckyItems = {
    ì „ì²´ìš´: ['ììˆ˜ì •', 'ë³´ë¼ìƒ‰ ì–‘ì´ˆ', 'ë¼ë²¤ë” í–¥'],
    ê±´ê°•ìš´: ['ë…¹ì°¨', 'ëŸ¬ë‹í™”', 'ìš”ê°€ë§¤íŠ¸'],
    ì• ì •ìš´: ['ì¥ë¯¸ê½ƒ', 'í–¥ìˆ˜', 'ì»¤í”Œë§'],
    ì§ì¥ìš´: ['íŒŒë€ìƒ‰ ë„¥íƒ€ì´', 'ê³ ê¸‰ íœ', 'ë‹¤ì´ì–´ë¦¬'],
    ì¬ë¬¼ìš´: ['í™©ê¸ˆìƒ‰ ì§€ê°‘', 'ë³µì£¼ë¨¸ë‹ˆ', 'í–‰ìš´ì˜ ë™ì „'],
    í•™ì—…ìš´: ['í˜•ê´‘íœ ì„¸íŠ¸', 'ë…¸íŠ¸ë¶', 'ë…ì„œë“±'],
  };

  const fortunes: FortuneResult[] = fortuneTypes.map((ft) => {
    const descList = detailedDescriptions[ft.type as keyof typeof detailedDescriptions];
    const adviceList = detailedAdvices[ft.type as keyof typeof detailedAdvices];
    const itemList = luckyItems[ft.type as keyof typeof luckyItems];
    
    return {
      type: ft.type,
      emoji: ft.emoji,
      score: Math.floor(random() * 35) + 65, // 65-100
      description: descList[Math.floor(random() * descList.length)],
      advice: adviceList[Math.floor(random() * adviceList.length)],
      luckyItem: itemList[Math.floor(random() * itemList.length)],
    };
  });

  return {
    birthDate: new Date(birthYear, birthMonth - 1, birthDay),
    calendarType,
    birthHour,
    zodiacAnimal,
    zodiacSign,
    fortunes,
  };
}

// ì ìˆ˜ì— ë”°ë¥¸ ë“±ê¸‰ ë°˜í™˜
export function getScoreGrade(score: number): { grade: string; color: string } {
  if (score >= 90) return { grade: 'ëŒ€ê¸¸', color: '#FFD700' };
  if (score >= 80) return { grade: 'ê¸¸', color: '#32CD32' };
  if (score >= 70) return { grade: 'ì¤‘ê¸¸', color: '#4169E1' };
  if (score >= 60) return { grade: 'ì†Œê¸¸', color: '#FFA500' };
  return { grade: 'í‰', color: '#808080' };
}
